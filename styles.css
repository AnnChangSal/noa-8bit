
const showResumeBtn = document.getElementById("show-resume-btn");
const resumeContainer = document.getElementById("resume-container");

if (showResumeBtn && resumeContainer) {
  showResumeBtn.addEventListener("click", () => {
    console.log("Button clicked");

    if (!resumeContainer.innerHTML) {
      console.log("Adding resume images");
      const page1 = document.createElement("img");
      page1.src = "assets/resume_page1.png";
      page1.alt = "Resume Page 1";
      page1.classList.add("resume-page");

      const page2 = document.createElement("img");
      page2.src = "assets/resume_page2.png";
      page2.alt = "Resume Page 2";
      page2.classList.add("resume-page");

      page1.onerror = () => console.error("Failed to load resume_page1.png");
      page2.onerror = () => console.error("Failed to load resume_page2.png");

      resumeContainer.appendChild(page1);
      resumeContainer.appendChild(page2);

      resumeContainer.style.display = "flex";
      showResumeBtn.textContent = "Hide Resume";
      showResumeBtn.setAttribute("aria-expanded", "true");
    } else {
      if (resumeContainer.style.display === "none") {
        resumeContainer.style.display = "flex";
        showResumeBtn.textContent = "Hide Resume";
        showResumeBtn.setAttribute("aria-expanded", "true");
      } else {
        resumeContainer.style.display = "none";
        showResumeBtn.textContent = "Click to View Resume";
        showResumeBtn.setAttribute("aria-expanded", "false");
      }
    }
  });
}

const profileCard = document.getElementById("profile-card");
if (profileCard) {
  profileCard.addEventListener("click", (e) => {
    // Prevent flip if clicking on input or button inside the card
    if (e.target.tagName === 'INPUT' || e.target.tagName === 'BUTTON') return;
    
    profileCard.classList.toggle("flipped");
    console.log("Profile card flipped");
  });
}

const GITHUB_USERNAME = "AnnChangSal";
const githubAvatarContainer = document.getElementById("github-avatar");

if (githubAvatarContainer) {
  fetch(`https://api.github.com/users/${GITHUB_USERNAME}`)
    .then((response) => {
      if (!response.ok) {
        throw new Error("GitHub API error: " + response.statusText);
      }
      return response.json();
    })
    .then((data) => {
      const avatarUrl = data.avatar_url;
      const avatarImg = document.createElement("img");
      avatarImg.src = avatarUrl;
      avatarImg.alt = "GitHub Profile Picture";
      
      // Styling handled here to ensure consistency
      avatarImg.style.width = "120px";
      avatarImg.style.height = "120px";
      avatarImg.style.borderRadius = "50%";
      avatarImg.style.marginBottom = "10px";
      avatarImg.style.border = "2px solid #00ffcc";

      githubAvatarContainer.innerHTML = ""; // Clear placeholder
      githubAvatarContainer.appendChild(avatarImg);
    })
    .catch((error) => {
      console.error("Error fetching GitHub profile picture:", error);
      githubAvatarContainer.textContent = "Profile Img Error";
    });
}

const iframe = document.getElementById('gamma-presentation');
let currentSlide = 1;
const maxSlides = 5;

// Only define navigation function if iframe exists
if (iframe) {
  window.navigateSlide = function(direction) {
    if (direction === 'prev') {
      currentSlide = Math.max(1, currentSlide - 1);
    } else if (direction === 'next') {
      currentSlide = Math.min(maxSlides, currentSlide + 1);
    }
    iframe.src = `https://gamma.app/embed/zyses8itfl4m7r6?slide=${currentSlide}`;
  };
}
